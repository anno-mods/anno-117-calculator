{"type":"relation","from":"Option","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"DLC","to":"Option","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"NeedConsumptionSetting","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Consumer","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Module","to":"Consumer","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"PublicConsumerBuilding","to":"Consumer","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Factory","to":"Consumer","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Product","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"MetaProduct","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ProductCategory","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Buff","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Patron","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Effect","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Item","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Region","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Session","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidenceBuilding","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidenceBuilding","to":"Constructible","relationType":"implements","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"PopulationLevel","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"PopulationGroup","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Workforce","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"NeedCategory","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidenceEffect","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"RecipeList","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"NPCTrader","to":"NamedElement","relationType":"extends","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"NamedElement","to":"src/util.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Option","to":"src/util.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"DLC","to":"src/util.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"BuildingsCalc","to":"src/util.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"NumberInputHandler","to":"src/util.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"NeedConsumptionSetting","to":"src/util.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Consumer","to":"src/factories.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Module","to":"src/factories.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"PublicConsumerBuilding","to":"src/factories.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Factory","to":"src/factories.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Product","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"MetaProduct","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Demand","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ProductCategory","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Buff","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Patron","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Effect","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Item","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"AqueductBuff","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ExtraGoodProductionList","to":"src/production.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Region","to":"src/world.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Session","to":"src/world.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"IslandManager","to":"src/world.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Island","to":"src/world.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Constructible","to":"src/world.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidenceBuilding","to":"src/population.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"PopulationLevel","to":"src/population.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"PopulationGroup","to":"src/population.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Workforce","to":"src/population.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"WorkforceDemand","to":"src/population.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"AppliedBuff","to":"src/buffs.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ExtraGoodProduction","to":"src/buffs.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"DarkMode","to":"src/views.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ViewMode","to":"src/views.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Template","to":"src/views.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ProductionChainView","to":"src/views.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidenceEffectView","to":"src/views.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"CollapsibleStates","to":"src/views.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidencePresenter","to":"src/views.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"NeedCategory","to":"src/consumption.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"Need","to":"src/consumption.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidenceNeed","to":"src/consumption.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidenceEffect","to":"src/consumption.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidenceEffectCoverage","to":"src/consumption.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"ResidenceEffectEntryCoverage","to":"src/consumption.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"RecipeList","to":"src/consumption.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"NPCTrader","to":"src/trade.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"TradeList","to":"src/trade.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"TradeManager","to":"src/trade.ts","relationType":"defined_in","createdAt":"2025-08-12T09:07:04.103Z","version":1}
{"type":"relation","from":"src/factories.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/factories.ts","to":"src/population.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/factories.ts","to":"src/production.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/factories.ts","to":"src/buffs.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/factories.ts","to":"src/trade.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/factories.ts","to":"src/world.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/factories.ts","to":"src/types.config.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/production.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/production.ts","to":"src/types.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/production.ts","to":"src/types.config.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/production.ts","to":"src/population.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/production.ts","to":"src/world.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/production.ts","to":"src/factories.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/production.ts","to":"src/buffs.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/world.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/world.ts","to":"src/i18n.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/world.ts","to":"src/population.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/world.ts","to":"src/production.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/world.ts","to":"src/factories.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/world.ts","to":"src/views.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/world.ts","to":"src/consumption.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/population.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/population.ts","to":"src/production.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/population.ts","to":"src/consumption.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/population.ts","to":"src/types.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/population.ts","to":"src/world.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/views.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/views.ts","to":"src/population.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/views.ts","to":"src/consumption.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/views.ts","to":"src/production.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/views.ts","to":"src/factories.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/consumption.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/consumption.ts","to":"src/population.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/consumption.ts","to":"src/types.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/consumption.ts","to":"src/types.config.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/consumption.ts","to":"src/production.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/consumption.ts","to":"src/world.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/trade.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/trade.ts","to":"src/factories.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/trade.ts","to":"src/world.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/components.ts","to":"src/consumption.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/components.ts","to":"src/factories.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/components.ts","to":"src/population.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/components.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/components.ts","to":"src/world.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.449Z","version":1}
{"type":"relation","from":"src/main.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/main.ts","to":"src/i18n.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/main.ts","to":"src/components.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/main.ts","to":"src/types.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/main.ts","to":"src/views.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/main.ts","to":"src/types.config.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/main.ts","to":"src/world.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/main.ts","to":"src/production.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/main.ts","to":"src/trade.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/buffs.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/buffs.ts","to":"src/types.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/buffs.ts","to":"src/population.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/buffs.ts","to":"src/world.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/buffs.ts","to":"src/production.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/buffs.ts","to":"src/factories.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"relation","from":"src/types.ts","to":"src/util.ts","relationType":"imports","createdAt":"2025-08-12T09:07:29.450Z","version":1}
{"type":"entity","name":"TradeRoute","entityType":"class","observations":["Represents a trade route between two islands","Manages transportation of goods between factories on different islands","Key properties: from (Island), to (Island), fromFactory (Factory), toFactory (Factory), amount (observable)","Methods: getOpposite(list), getOppositeFactory(factory), isExport(list), delete()","Constructor validates all required parameters and creates amount observable"],"createdAt":"2025-08-12T11:00:34.412Z","version":1}
{"type":"entity","name":"NPCTradeRoute","entityType":"class","observations":["Represents automatic trade routes provided by NPC traders","Key properties: ProductionPerMinute (number), to/from (Islands), toFactory/fromFactory (Factories), trader (NPCTrader), checked (observable)","Amount is fixed at ProductionPerMinute value","Checked subscription automatically adds/removes route from tradeManager.npcRoutes","Constructor validates ProductionPerMinute is required number"],"createdAt":"2025-08-12T11:00:34.412Z","version":1}
{"type":"entity","name":"NPCTrader","entityType":"class","observations":["Extends NamedElement","Represents NPC traders that provide goods","Has goodsProduction array property","Used to create NPCTradeRoute instances for automatic trade"],"createdAt":"2025-08-12T11:00:34.412Z","version":1}
{"type":"entity","name":"TradeList","entityType":"class","observations":["Manages trade routes for a specific factory","Key properties: island (Island), factory (Factory), routes (observableArray), npcRoutes (NPCTradeRoute[])","Computed properties: inputAmount() - sums export routes, outputAmount() - sums import routes + NPC routes, amount() - net balance","UI properties: unusedIslands, selectedIsland, export, newAmount for creating new routes","Methods: canCreate(), create(), onShow() - updates available islands and defaults","Constructor creates NPCTradeRoute instances from view.productsToTraders mapping"],"createdAt":"2025-08-12T11:00:34.412Z","version":1}
{"type":"entity","name":"TradeManager","entityType":"class","observations":["Global manager for all trade routes in the application","Properties: routes (observableArray), npcRoutes (observableArray)","Persistence: saves/loads routes to/from localStorage with keys 'tradeRoutes' and 'npcTradeRoutes'","Methods: add(route), remove(route), islandDeleted(island) - cleanup when islands deleted","Subscribes to view.selectedFactory to trigger TradeList.onShow()","Constructor handles loading saved routes and creating persistence subscriptions"],"createdAt":"2025-08-12T11:00:34.412Z","version":1}
{"type":"entity","name":"TradeRouteSystem","entityType":"architecture","observations":["Trade routes connect factories between different islands","Each factory has a TradeList that manages its trade routes","Routes can be regular player-created routes or automatic NPC routes","Export routes remove goods from source island, import routes add goods to destination island","Amount calculations: inputAmount (exports), outputAmount (imports + NPC), net amount (balance)","Persistence system saves route configurations to localStorage","UI allows creating routes by selecting destination island and amount"],"createdAt":"2025-08-12T11:00:34.412Z","version":1}
{"type":"entity","name":"EffectsPersistenceSystem","entityType":"architecture","observations":["Successfully implemented comprehensive effects persistence across all three scopes in Anno 117 Calculator","Global Effects: Persist in main.ts:369-384 using storage keys 'global.effect.{effectGuid}.scaling'","Session Effects: Persist in Session constructor (world.ts:203-218) using keys 'session.{sessionGuid}.effect.{effectGuid}.scaling'","Island Effects: Persist in Island constructor (world.ts:786-789) using existing persistFloat helper","All implementations use KnockoutJS observable subscriptions for automatic localStorage persistence","TypeScript-safe null checking for localStorage.getItem() results ensures robust error handling","Consistent storage key naming pattern: '{scope}.effect.{effectGuid}.scaling' across all three levels","No changes required to existing Effect class interface - maintains backward compatibility","Follows established persistence patterns from factory/building persistence systems","Resolves the persistence gap where effect scaling states were lost on page reload","Architecture maintains separation of concerns: global/session/island effect scopes remain distinct","Uses established helper function patterns where appropriate (island effects use persistFloat)","Implementation passes TypeScript compilation without errors and follows existing architectural patterns"],"createdAt":"2025-08-16T15:42:30.000Z","version":1}
{"type":"relation","from":"EffectsPersistenceSystem","to":"src/main.ts","relationType":"implemented_in","createdAt":"2025-08-16T15:42:30.000Z","version":1}
{"type":"relation","from":"EffectsPersistenceSystem","to":"src/world.ts","relationType":"implemented_in","createdAt":"2025-08-16T15:42:30.000Z","version":1}
{"type":"relation","from":"EffectsPersistenceSystem","to":"Effect","relationType":"persists_state_of","createdAt":"2025-08-16T15:42:30.000Z","version":1}